#!/bin/sh

# =============================================================================
# Pre-push Hook - Prevent direct pushes to protected branches
# =============================================================================

# Get the current branch name
CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)

# Protected branches that cannot be pushed to directly
case "$CURRENT_BRANCH" in
  main|master|stage|staging|dev|develop)
    echo ""
    echo "ðŸš« PUSH REJECTED!"
    echo ""
    echo "   Direct pushes to '$CURRENT_BRANCH' branch are not allowed."
    echo ""
    echo "   Please follow the Git workflow:"
    echo "   1. Create a feature branch: git checkout -b feature/your-feature-name"
    echo "   2. Make your changes and commit"
    echo "   3. Push your feature branch: git push origin feature/your-feature-name"
    echo "   4. Create a Pull Request on GitHub"
    echo ""
    echo "   Branch naming conventions:"
    echo "   â€¢ feature/description  - New features"
    echo "   â€¢ fix/description      - Bug fixes"
    echo "   â€¢ hotfix/description   - Critical production fixes"
    echo "   â€¢ docs/description     - Documentation updates"
    echo "   â€¢ refactor/description - Code refactoring"
    echo "   â€¢ test/description     - Test additions/updates"
    echo ""
    exit 1
    ;;
  *)
    echo "âœ… Pre-push checks passed for branch: $CURRENT_BRANCH"
    exit 0
    ;;
esac
